# Layer 7 routing architecture

The layer 7 routing solution for swarm workloads has three components:

* **Interlock-proxy**: This is a proxy/load-balancing service that handles the
requests from the outside world. By default this service is an NGINX load
balancer.
* **Interlock-extension**: This service generates the configuration for the
proxy service. For this reason it needs to match the proxy service
you're using. If your proxy is NGINX, you need to use the NGINX Interlock extension.
* **Interlock**: This is the central piece of the layer 7 routing solution.
It uses the Docker API to listen for events and keep track of your services.
When something changes in your services, it uses a new configuration generated by
the extension service and automatically reconfigures the proxy service to use
the new configuration.

This is what the default configuration looks like, once you enable layer 7
routing in UCP:

![](../images/interlock-architecture-1.svg)

An Interlock service starts running on a manager node, an Interlock-extension
service starts running on a worker node, and two replicas of the
Interlock-proxy service run on worker nodes.

## Interlock service

## Extension service

## Proxy service
