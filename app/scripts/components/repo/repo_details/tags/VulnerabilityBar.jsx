'use strict';

import React, { PropTypes, Component } from 'react';
const { number } = PropTypes;

export default class VulnerabilityBar extends Component {
  static propTypes = {
    critical: number,
    secure: number,
    major: number,
    minor: number
  }

  getStyle = (severity, num, total) => {
    const colors = {
      critical: `#E8404B`,
      major: `#FD854E`,
      minor: `#FED954`,
      secure: `#7DCCC0`
    };

    let width;
    if (total) {
      width = num / total * 100;
    } else if (severity === 'secure'){
      width = 100;
    } else {
      width = 0;
    }

    return {
      width: `${width}%`,
      backgroundColor: colors[severity],
      display: `inline-block`,
      height: `100%`,
      userSelect: 'none'
    };

  }

  render() {
    const {
      critical,
      secure,
      major,
      minor
    } = this.props;
    const total = critical + secure + major + minor;
    const criticalStyle = this.getStyle('critical', critical, total);
    const majorStyle = this.getStyle('major', major, total);
    const minorStyle = this.getStyle('minor', minor, total);
    const secureStyle = this.getStyle('secure', secure, total);
    const wrapperStyle = { width: `100%` };

    return (
      <div style={wrapperStyle}>
        <div style={criticalStyle}>&nbsp;</div>
        <div style={majorStyle}>&nbsp;</div>
        <div style={minorStyle}>&nbsp;</div>
        <div style={secureStyle}>&nbsp;</div>
      </div>
    );

  }
}
