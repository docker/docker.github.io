---
title: "Can't run task on node after converting it from a DTR node to a worker node"
id: 2034
draftstate: inactive
deleted: false
source: https://success.docker.com/@api/deki/pages/2034/contents
tags:
- tag: "article:howto"
- tag: "product:datacenter"
- tag: "stage:reviewed"
---
{% raw %}
<p>
 If you uninstalled DTR from a node and are unable to run tasks on it as a worker node, there might still be cluster configuration data somewhere that still thinks the former DTR node is still a manager node. This can happen if DTR was uninstalled incorrectly or some configuration was not done correctly.
 <br/>
 <br/>
 To convert the former DTR node to a worker node, demote the node, remove it from the cluster, and then re-add it using the following steps:
</p>
<ol>
 <li>
  Drain the node using a command similar to the following:
  <pre>
docker node update --availability drain <span class="replaceabletext">&lt;docker_node&gt;</span></pre>
 </li>
 <li>
  Demote the node from manager status to worker status using a command similar to the following:
  <pre>
docker node demote <span class="replaceabletext">&lt;docker_node&gt;</span></pre>
 </li>
 <li>
  On the command line of the node itself, issue the following command to have it leave the swarm:
  <pre>
docker swarm leave</pre>
 </li>
 <li>
  Now rejoin the node to the swarm using the join token.
  <br/>
  First, get the join token by running the following from a command line on a UCP node:
  <pre>
docker swarm join-token worker</pre>
  Then add the node to this swarm as a worker, using the token from the previous command and the correct IP of the swarm manager:
  <pre>
docker swarm join --token <span class="replaceabletext">&lt;your_join_token&gt;</span> <span class="replaceabletext">&lt;swarm_manager_ip&gt;</span>:2377</pre>
  Run the
  <code>
   join
  </code>
  command that was given to you on the node.
 </li>
 <li>
  You should now be able to run workloads on that node.
 </li>
</ol>

{% endraw %}
