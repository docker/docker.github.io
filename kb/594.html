---
title: "Introduction to Docker Content Trust"
id: 594
draftstate: inactive
deleted: false
source: https://success.docker.com/@api/deki/pages/594/contents
tags:
- tag: "article:tutorial"
- tag: "component:notary"
- tag: "notary"
- tag: "platform:linux"
- tag: "product:datacenter"
- tag: "stage:reviewed"
- tag: "testedon:cse-1.9.0-cs1"
---
{% raw %}
<p>
 This guide provides an overview of Docker Content Trust and some quick familiarization exercises. It was introduced in Docker Engine 1.8 and Docker CS Engine 1.9.0 an is available in Docker EE.
</p>
<p>
 Docker Content Trust
 <span style="font-weight:400;">
  (DCT) provides strong cryptographic guarantees over what code and what versions of software are being run in your infrastructure.  Docker Content Trust integrates
 </span>
 <a class="external" href="http://theupdateframework.com/" rel="external nofollow" target="_blank">
  <span style="font-weight:400;">
   The Update Framework (TUF)
  </span>
 </a>
 <span style="font-weight:400;">
  into Docker using
 </span>
 <a class="link-https" href="https://youtu.be/at72dhg-SZY?t=4873" rel="external nofollow" target="_blank">
  <span style="font-weight:400;">
   Notary
  </span>
 </a>
 <span style="font-weight:400;">
  , an open source tool that provides trust over any content.
 </span>
</p>
<p>
 When a publisher using Docker Content Trust pushes an image to a remote registry, Docker Engine signs the image locally with the publisher’s private key. When a user  later pulls this image, Docker Engine uses the publisher’s public key to verify that the image is exactly what the publisher created, has not been tampered with, and is up to date.
</p>
<p>
 More details about the internals of DCT can be found in the
 <a class="link-https" href="https://blog.docker.com/2015/08/content-trust-docker-1-8/" rel="external nofollow" target="_blank" title="https://blog.docker.com/2015/08/content-trust-docker-1-8/">
  Docker Blog.
 </a>
</p>
<p>
 More information about using DCT can be found on
 <a class="link-https" href="https://docs.docker.com/engine/security/trust/content_trust/" rel="external nofollow" target="_blank" title="https://docs.docker.com/engine/security/trust/content_trust/">
  doc.docker.com
 </a>
 .
</p>
<div class="mt-section" id="section_1" mt-section-origin="KBase/Introduction_to_Docker_Content_Trust">
 <span id="DCT_Motivations">
 </span>
 <h3 id="2-0">
  DCT Motivations
 </h3>
 <ul>
  <li>
   Image Provenance is critical for Production
  </li>
  <li>
   Distributed content should be signed
  </li>
  <li>
   Key compromise should be difficult
  </li>
  <li>
   Compromise resilience is important
  </li>
  <li>
   Replay attacks should be hard
  </li>
  <li>
   Existing infrastructure is reused
  </li>
  <li>
   Trusting Docker should not be mandatory
  </li>
 </ul>
</div>
<div class="mt-section" id="section_2" mt-section-origin="KBase/Introduction_to_Docker_Content_Trust">
 <span id="Pull_Images_with_Docker_Content_Trust">
 </span>
 <h3 id="2-1">
  Pull Images with Docker Content Trust
 </h3>
 <pre>
<code>docker pull --disable-content-trust jpetazzo/clock</code></pre>
 <pre>
<code>docker -D pull --disable-content-trust hello-world
docker -D pull hello-world</code></pre>
 <ul>
  <li>
   Temporarily disable content trust to successfully pull unsigned content:
  </li>
  <li>
   Enable debug mode to compare the behavior of pulls where signed content is verified to pulls where no trust data is verified:
  </li>
  <li>
   Enable DCT:
   <pre>
<code>export DOCKER_CONTENT_TRUST=1</code></pre>
  </li>
  <li>
   Try to pull unsigned content and observe error messages:
   <pre>
<code>docker pull jpetazzo/clock</code></pre>
  </li>
 </ul>
</div>
<div class="mt-section" id="section_3" mt-section-origin="KBase/Introduction_to_Docker_Content_Trust">
 <span id="Sign_and_Push_Images_with_DCT">
 </span>
 <h3 id="2-2">
  Sign and Push Images with DCT
 </h3>
 <ul>
  <li>
   Log into Docker Hub with Docker Engine 1.8, Docker CS Engine 1.9.0, or newer:
   <pre>
<code>docker login</code></pre>
  </li>
  <li>
   With DCT enabled, push an image to Hub. When you push, Docker will note you have no keys, create them, and prompt you for a passphrase to encrypt them:
   <pre>
<code>docker tag <span class="replaceabletext">&lt;clock image ID&gt;</span> <span class="replaceabletext">&lt;HubUsername&gt;</span>/clock:latest
docker -D push <span class="replaceabletext">&lt;username&gt;</span>/clock:latest 
Enter key passphrase for offline key with id <span class="replaceabletext">&lt;yourIDnumber&gt;</span>: 
Enter passphrase for new tagging key with id docker.io/<span class="replaceabletext">&lt;HubUsername&gt;</span>/clock (<span class="replaceabletext">&lt;yourIDnumber&gt;</span>):</code>
</pre>
  </li>
 </ul>
</div>
{% endraw %}
